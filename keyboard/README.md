# IOS & Android中的H5遇到的键盘遮挡兼容问题总结

--------------------------------------------------
### 兼容处理解决方案说明
1. 在 `Android` 和 `IOS` 上，获知软键盘弹起和收起状态存在差异，且页面 `webview` 表现不同。
2. 在 `IOS12` 上，微信版本 `v6.7.4` 及以上，输入框获取焦点，键盘弹起，页面 `webview` 整体往上滚动，当键盘收起后，不回到原位，导致键盘原来所在位置是空白的。
3. 在 `IOS` 上，使用第三方输入法，高度计算存在偏差，导致在有些输入法弹起，将输入框挡住一部分。
4. 在有些浏览器(比如：小米浏览器)上使用一些操作技巧，还是存在输入框被输入法遮挡。
--------------------------------------------------
### IOS上的键盘弹起表现 
在 `IOS` 上，输入框（`input`、`textarea` 或 `富文本`）获取焦点，键盘弹起，页面（`webview`）并没有被压缩，或者说高度（`height`）没有改变，只是页面（`webview`）整体往上滚了，且最大滚动高度（`scrollTop`）为软键盘高度。
> **也就是输入框[获取]()焦点的时候，键盘处于[弹起]()状态**
--------------------------------------------------
### IOS上的键盘收起表现
触发软键盘上的收起按钮键盘或者输入框以外的页面区域时，输入框失去焦点，软键盘收起。
> **也就是输入框[失去]()焦点的时候，键盘处于[收起]()状态**
--------------------------------------------------
### Android上的键盘弹起表现 
在 `Android` 上，输入框获取焦点，键盘弹起，但是页面（`webview`）高度会发生改变，一般来说，高度为可视区高度（原高度减去软键盘高度——并不一定是这样），除了因为页面内容被撑开可以产生滚动，`webview` 本身不能滚动。
> **也就是高度[减少]()的时候，键盘处于[弹起]()状态**
--------------------------------------------------

### Android上的键盘收起表现 
触发输入框以外的区域时，输入框失去焦点，软键盘收起。但是，触发键盘上的收起按钮键盘时，输入框并不会失去焦点，同样软键盘收起。
> **也就是高度[增加]()的时候，键盘处于[收起]()状态**
--------------------------------------------------

### 最终解决方案，在键盘弹起的时候，让当前的元素滚动到浏览器窗口的可视区域内，核心代码如下
```javascript
setTimeout(function() {
	//flag值范围为true/false
	inputDom.scrollIntoView(flag);
	// 或者
	//inputDom.scrollIntoViewIfNeeded(flag);
});
```

> 当前目录中含有demo代码，可翻阅。[参考文章](https://segmentfault.com/a/1190000018959389)